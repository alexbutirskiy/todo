// Modal window parametres
var wnd_params = {
    modal: true,
    autoOpen: false,
    resizable : false,
    width: 600,
    height: 350,
    show: { effect: "slideDown", duration: 200 },
    hide: { effect: "slideUp",   duration: 200 },
    buttons: [ {
      text: "Cancel",
      click: function() { $( this ).dialog( "close" ); }
    }, {
      text: "Save",
      click: function() { 
        $(this).find('form').submit(); 
        $(this).dialog( "close" );
      }
    }]
  };

// Put all calls into function to avoid async problem
(function() {
  $('#edit_task_wnd').html("<%= j render partial: 'task_form' %>");
  $('#edit_task_wnd').dialog().dialog(wnd_params);
  $('#edit_task_wnd').dialog('open');
  $(function() {
    $('.datepicker').datepicker({dateFormat: 'yy-mm-dd'});
  });
})();